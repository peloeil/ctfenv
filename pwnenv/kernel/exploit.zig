const std = @import("std");
const linux = std.os.linux;
const kzig = @import("kzig/all.zig");

pub var fd: i32 = 0;

fn init_exploit(ctx: *kzig.ctx) !void {
    kzig.ret2usr.save_state(ctx);

    var cpu: linux.cpu_set_t = std.mem.zeroes(linux.cpu_set_t);
    cpu[0] = 1;
    try linux.sched_setaffinity(0, &cpu);
}

pub fn main() !void {
    var ctx: kzig.ctx = .{};
    try init_exploit(&ctx);

    std.debug.print("[ ] exploit start\n", .{});

    std.debug.print("[-] exploit failed...\n", .{});
}
